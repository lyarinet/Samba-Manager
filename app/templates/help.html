{% extends 'layout.html' %}
{% block content %}
<div class="page-header">
  <h2>Help & Documentation</h2>
</div>

<div class="row">
  <div class="col-lg-3">
    <div class="list-group mb-4">
      <a href="#overview" class="list-group-item list-group-item-action">Overview</a>
      <a href="#shares" class="list-group-item list-group-item-action">Managing Shares</a>
      <a href="#users" class="list-group-item list-group-item-action">User Management</a>
      <a href="#groups" class="list-group-item list-group-item-action">System Groups</a>
      <a href="#settings" class="list-group-item list-group-item-action">Global Settings</a>
      <a href="#troubleshooting" class="list-group-item list-group-item-action">Troubleshooting</a>
      <a href="#faq" class="list-group-item list-group-item-action">FAQ</a>
    </div>
  </div>
  <div class="col-lg-9">
    <div class="card mb-4">
      <div class="card-body">
        <h3 id="overview">Overview</h3>
        <p>
          Samba Manager is a web-based interface for managing your Samba file sharing server on Linux systems. 
          It provides an easy way to manage shares, users, and configuration without editing configuration files directly.
        </p>
        
        <h3 id="shares">Managing Shares</h3>
        <p>
          To manage your Samba shares, navigate to the "Shares" section in the sidebar menu. Here you can:
        </p>
        <ul>
          <li><strong>Add a new share:</strong> Click on "Add Share" button and fill in the required information.</li>
          <li><strong>Edit an existing share:</strong> Click the "Edit" button next to the share you want to modify.</li>
          <li><strong>Delete a share:</strong> Click the "Delete" button to remove a share.</li>
        </ul>
        
        <h3 id="users">User Management</h3>
        <p>
          To manage Samba users, go to the "Samba Users" section in the sidebar menu. Here you can:
        </p>
        <ul>
          <li><strong>Add a new user:</strong> Enter the username and password in the form and click "Add User".</li>
          <li><strong>Reset password:</strong> Click the "Reset Password" button to set a new password.</li>
          <li><strong>Enable/Disable user:</strong> Toggle user access without deleting their account.</li>
          <li><strong>Delete user:</strong> Remove a user completely from the Samba server.</li>
        </ul>
        
        <h3 id="groups">System Groups</h3>
        <p>
          System groups are used to manage access permissions for multiple users at once:
        </p>
        <ul>
          <li><strong>Add a group:</strong> Enter the group name and click "Create Group".</li>
          <li><strong>Delete a group:</strong> Remove a group that's no longer needed.</li>
          <li><strong>Assign to shares:</strong> Use groups in share permissions by prefixing with "@" (e.g., @smbusers).</li>
        </ul>
        
        <h3 id="settings">Global Settings</h3>
        <p>
          Configure server-wide settings in the "Global Settings" section:
        </p>
        <ul>
          <li><strong>Server string:</strong> A description of your Samba server.</li>
          <li><strong>Workgroup:</strong> The Windows workgroup or domain name.</li>
          <li><strong>Security settings:</strong> Authentication and access control options.</li>
          <li><strong>Performance options:</strong> Tune server performance parameters.</li>
        </ul>
        
        <h3 id="troubleshooting">Troubleshooting</h3>
        <p>
          If you encounter issues with Samba Manager or your Samba server:
        </p>
        <ul>
          <li><strong>Check logs:</strong> View Samba logs in the Maintenance section.</li>
          <li><strong>Verify services:</strong> Ensure Samba services (smbd and nmbd) are running.</li>
          <li><strong>Fix permissions:</strong> Use the "Fix Share Permissions" tool in Maintenance.</li>
          <li><strong>Firewall rules:</strong> Make sure your firewall allows Samba traffic (ports 139 and 445).</li>
          <li><strong>SELinux:</strong> If using SELinux, check that it's configured to allow Samba.</li>
        </ul>
        
        <h3 id="faq">Frequently Asked Questions</h3>
        <div class="accordion" id="faqAccordion">
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                Why can't I access my share from another computer?
              </button>
            </h2>
            <div id="faq1" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                Check that the Samba service is running, your firewall allows Samba traffic (ports 139 and 445), 
                and that the user has proper access permissions for the share.
              </div>
            </div>
          </div>
          
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                How do I reset a user's password?
              </button>
            </h2>
            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                Go to the "Samba Users" section, find the user, and click on "Reset Password". Enter the new password and submit the form.
              </div>
            </div>
          </div>
          
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                What's the difference between "valid users" and "write list"?
              </button>
            </h2>
            <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <p>"Valid users" defines which users can access the share at all. If a user is not in this list, they cannot connect to the share.</p>
                <p>"Write list" defines which users have write permission to the share. Users in this list can modify files, while other valid users will have read-only access.</p>
              </div>
            </div>
          </div>
          
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                How do I use system groups for access control?
              </button>
            </h2>
            <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                First, create a system group in the "System Groups" section. Then, when configuring share permissions, you can reference the group by prefixing it with "@" (e.g., @smbusers). Users who are members of that system group will inherit the permissions assigned to the group.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} 